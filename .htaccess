# Prevent directory browsing (hides the list of files)
Options -Indexes

# 1. Block access to hidden files (starts with a dot, like .env, .htaccess)
<FilesMatch "^\.">
    Require all denied
</FilesMatch>

# 2. Block access to specific internal files (db.php, README.md)
# The (?i) makes it case-insensitive (blocks readme.md and README.MD)
<FilesMatch "^(db\.php|(?i)readme\.md)$">
    Require all denied
</FilesMatch>

# 3. Security headers (Optional but recommended)
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
</IfModule>

RewriteEngine On

# 1. Handle the case where someone goes to exactly /test or /test/
# We send it to test.php without a slug
RewriteRule ^test/?$ test.php [L,QSA]

# 2. Handle /test/XXX 
# We capture XXX and send it to test.php?slug=XXX
RewriteRule ^test/([a-zA-Z0-9_-]+)/?$ test.php?slug=$1 [L,QSA]
